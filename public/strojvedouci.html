<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StrojvedoucÃ­ | Multi-Cargo Doprava</title>
    <link rel="stylesheet" href="/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
      body { font-family: 'Inter', Arial, sans-serif; background: #f7f8fa; color: #23272a; }
      #loginOverlay { position:fixed;z-index:9999;top:0;left:0;width:100vw;height:100vh;background:rgba(30,34,40,0.97);display:flex;align-items:center;justify-content:center;flex-direction:column; }
      #loginOverlay > div { background:#23272a;padding:36px 32px 28px 32px;border-radius:18px;box-shadow:0 8px 32px #0008;display:flex;flex-direction:column;align-items:center;min-width:320px; }
      #loginOverlay img { width:72px;height:72px;border-radius:16px;margin-bottom:18px;box-shadow:0 2px 8px #0006; }
      .discord-login-btn { background: linear-gradient(90deg, #6a8cff 0%, #a084ee 100%); color: #fff; border: none; border-radius: 9px; font-weight: 600; font-size: 1.15em; padding: 12px 32px; box-shadow: 0 2px 8px #6a8cff22; cursor: pointer; transition: background 0.2s, box-shadow 0.2s; }
      .discord-login-btn:hover { background: linear-gradient(90deg, #4f6edb 0%, #a084ee 100%); box-shadow: 0 4px 16px #6a8cff33; }
      #userProfileBar { display: flex; align-items: center; justify-content: flex-end; padding: 8px 16px; background: #fff; border-bottom: 1px solid #eaeaea; }
      #userProfileBar img { width: 38px; height: 38px; border-radius: 50%; margin-right: 8px; }
      #userProfileBar span { font-size: 0.9rem; color: #23272a; }
    </style>
</head>
<body>
    <div id="loginOverlay" style="display:none;">
      <div>
        <img src="/logo.webp" alt="Logo">
        <h2 style="color:#fff;font-size:1.5em;margin-bottom:10px;">PÅ™ihlÃ¡Å¡enÃ­ do MCD</h2>
        <p style="color:#b9bbbe;font-size:1.08em;margin-bottom:22px;text-align:center;">Pro pokraÄovÃ¡nÃ­ se pÅ™ihlaÅ¡te pÅ™es Discord.</p>
        <button id="discordLoginBtn" class="discord-login-btn" style="font-size:1.15em;padding:12px 32px;border-radius:9px;box-shadow:0 2px 8px #0004;">ğŸ”‘ PÅ™ihlÃ¡sit se pÅ™es Discord</button>
      </div>
    </div>
    <div id="userProfileBar" style="display:none;"></div>
    <header class="header-logo-title">
        <h1>StrojvedoucÃ­ <span class="mcd-accent">MCD</span></h1>
        <div class="subtitle">PÅ™ehled a sprÃ¡va strojvedoucÃ­ch spoleÄnosti</div>
    </header>
    <div class="animated-bar"></div>
    <div class="main-rozcestnik">
      <div class="rozcestnik-palette">
        <button class="rozcestnik-toggle">â˜° OtevÅ™Ã­t rozcestnÃ­k</button>
        <div class="rozcestnik-menu" style="display:none;">
          <a href="/strojvedouci.html" class="rozcestnik-link active">ğŸ‘¤ StrojvedoucÃ­</a>
          <a href="/index.html" class="rozcestnik-link">ğŸ  DispeÄink</a>
        </div>
      </div>
      <div class="rozcestnik-welcome">
        <h2>StrojvedoucÃ­</h2>
        <p>Vyberte si akci:</p>
        <ul class="rozcestnik-list">
          <li>
            <button class="rozcestnik-tile" id="sluzbaBtn" style="margin-bottom:12px;">ğŸ•’ PÅ™Ã­chod do sluÅ¾by</button>
          </li>
          <li>
            <a href="#zamestnanci" class="rozcestnik-tile" onclick="document.getElementById('zamestnanciSection').scrollIntoView({behavior:'smooth'});return false;">ğŸ‘¤ ZamÄ›stnanci</a>
          </li>
          <li>
            <button class="rozcestnik-tile" id="pracovatBtn" style="margin: 24px auto 0 auto; display: block;">ğŸ’¼ Pracovat</button>
          </li>
        </ul>
      </div>
    </div>

    <!-- Widget pro vÃ½bÄ›r vlaku -->
    <div id="trainWidgetOverlay" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(30,34,40,0.92); z-index:2000; align-items:center; justify-content:center;">
      <div style="background:#fff; border-radius:22px; box-shadow:0 8px 32px #0057b822; padding:32px 28px; min-width:320px; max-width:98vw; max-height:90vh; overflow:auto;">
        <button id="closeTrainWidget" style="position:absolute;top:14px;right:22px;background:none;border:none;font-size:2em;cursor:pointer;color:#0057b8;">&times;</button>
        <div id="trainListModern"></div>
      </div>
    </div>

    <!-- Widget pro detail vlaku -->
    <div id="trainDetailWidgetOverlay" style="display:none;position:fixed;z-index:10001;top:0;left:0;width:100vw;height:100vh;background:rgba(30,34,40,0.92);align-items:center;justify-content:center;">
      <div id="trainDetailWidget" style="background:#fff;padding:32px 28px 24px 28px;border-radius:22px;box-shadow:0 8px 32px #0057b8cc;min-width:340px;max-width:98vw;max-height:90vh;overflow-y:auto;display:flex;flex-direction:column;align-items:center;border:4px solid #0057b8;position:relative;">
        <div id="trainDetailContent"></div>
        <button id="endRideBtn" style="margin-top:32px;padding:12px 32px;border-radius:10px;border:2px solid #e53935;background:#fff;color:#e53935;font-weight:600;font-size:1.1em;cursor:pointer;">TLAÄŒÃTKO UKONÄŒIT JÃZDU</button>
        <button id="closeTrainDetailWidget" style="display:none;position:absolute;top:18px;right:28px;background:none;border:none;font-size:2.2em;cursor:pointer;color:#0057b8;">&times;</button>
      </div>
    </div>
<!-- Widget pro zamÄ›stnance -->
<div id="zamestnanciWidgetOverlay" style="display:none;position:fixed;z-index:3000;top:0;left:0;width:100vw;height:100vh;background:rgba(30,34,40,0.92);align-items:center;justify-content:center;">
  <div id="zamestnanciWidget" style="background:linear-gradient(120deg,#fffbe6 0%,#ffe9b3 100%);border-radius:28px;box-shadow:0 8px 32px #bfa13a88;padding:38px 32px 32px 32px;min-width:340px;max-width:98vw;max-height:90vh;overflow-y:auto;position:relative;">
    <button id="closeZamestnanciWidget" style="position:absolute;top:18px;right:28px;background:none;border:none;font-size:2.2em;cursor:pointer;color:#bfa13a;">&times;</button>
    <h2 style="color:#bfa13a;text-align:center;margin-bottom:18px;">ZamÄ›stnanci</h2>
    <div id="zamestnanciAktualne" style="margin-bottom:28px;">
      <h3 style="color:#bfa13a;">AktuÃ¡lnÄ› v prÃ¡ci</h3>
      <div id="zamestnanciAktualneList">NaÄÃ­tÃ¡m...</div>
    </div>
    <div id="zamestnanciSkore">
      <h3 style="color:#bfa13a;">SkÃ³re</h3>
      <div id="zamestnanciSkoreList">NaÄÃ­tÃ¡m...</div>
    </div>
  </div>
</div>
    <section id="zamestnanciSection" style="margin: 40px auto; max-width: 600px; display: none;">
      <h2>ZamÄ›stnanci online</h2>
      <div id="zamestnanciList">NaÄÃ­tÃ¡m...</div>
    </section>

    <script type="module">
import { supabase } from '/lib/supabaseClient.js';

// ... celÃ½ JS kÃ³d zÅ¯stÃ¡vÃ¡ stejnÃ½ ...
    </script>
    <footer class="footer">
        &copy; 2025 Multi-Cargo Doprava (MCD) &mdash; strÃ¡nka strojvedoucÃ­ch
    </footer>
</body>
</html>